<?xml version="1.0" encoding="utf-8"?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from car.urdf.xacro                 | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="car">
  <material name="blue">
    <color rgba="0 0 0.8 1"/>
  </material>
  <material name="white">
    <color rgba="1 1 1 1"/>
  </material>
  <link name="chassis">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.45 0.3 0.45"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision name="collision_chassis">
      <geometry>
        <box size="0.45 0.3 0.45"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="15"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.16875" ixy="0" ixz="0" iyy="0.253125" iyz="0" izz="0.16875"/>
    </inertial>
    <!-- caster wheel>
		<visual>
			<origin rpy="0 0 0" xyz="${l1/2-r2} 0 -${r2+0.225}"/>
			<geometry>
				<sphere radius="${r2}"/>
			</geometry>
		</visual>

		<collision name="caster_front_collision">
			<origin rpy="0 0 0" xyz="${l1/2-r2} 0 -${r2+0.225}"/>
			<geometry>
				<sphere radius="${r2}"/>
			</geometry>
			<surface>
				<friction>
					<ode>
						<mu>0</mu>
						<mu2>0</mu2>
						<slip1>100.0</slip1>
						<slip2>100.0</slip2>
					</ode>
				</friction>
			</surface>
		</collision-->
  </link>
  <link name="right_wheel">
    <visual>
      <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.1016"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision name="collision_right_wheel">
      <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.1016"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.3"/>
      <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
      <inertia ixx="0.000814192" ixy="0" ixz="0" iyy="0.000814192" iyz="0" izz="0.001548384"/>
    </inertial>
  </link>
  <joint name="joint_right_wheel_chassis" type="continuous">
    <origin rpy="0 0 0" xyz="-0.20 -0.19 -0.225"/>
    <child link="right_wheel"/>
    <parent link="chassis"/>
    <axis xyz="0 1 0"/>
    <limit effort="10000" velocity="1000"/>
    <joint_properties damping="1.0" friction="1.0"/>
  </joint>
  <link name="left_wheel">
    <visual>
      <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.1016"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision name="collision_left_wheel">
      <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.04" radius="0.1016"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.3"/>
      <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
      <inertia ixx="0.000814192" ixy="0" ixz="0" iyy="0.000814192" iyz="0" izz="0.001548384"/>
    </inertial>
  </link>
  <joint name="joint_left_wheel_chassis" type="continuous">
    <origin rpy="0 0 0" xyz="-0.20 0.19 -0.225"/>
    <child link="left_wheel"/>
    <parent link="chassis"/>
    <axis xyz="0 1 0"/>
    <limit effort="10000" velocity="1000"/>
    <joint_properties damping="1.0" friction="1.0"/>
  </joint>
  <link name="front_wheel">
    <visual>
      <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.03" radius="0.0762"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision name="collision_front_wheel">
      <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.03" radius="0.0762"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.3"/>
      <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
      <inertia ixx="0.000457983" ixy="0" ixz="0" iyy="0.000457983" iyz="0" izz="0.000870966"/>
    </inertial>
  </link>
  <joint name="joint_front_wheel_chassis" type="continuous">
    <origin rpy="0 0 0" xyz="0 0 -0.145"/>
    <child link="front_wheel"/>
    <parent link="axle"/>
    <axis xyz="0 1 0"/>
    <limit effort="10000" velocity="1000"/>
    <joint_properties damping="1.0" friction="1.0"/>
  </joint>
  <link name="axle">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.2" radius="0.005"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision name="collision_axle">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.2" radius="0.005"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="1.1"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.00367354166667" ixy="0" ixz="0" iyy="0.00367354166667" iyz="0" izz="1.375e-05"/>
    </inertial>
  </link>
  <joint name="joint_axle" type="revolute">
    <origin rpy="0 0 0" xyz="0.30 0 -0.1"/>
    <child link="axle"/>
    <parent link="chassis"/>
    <axis xyz="0 0 1"/>
    <limit effort="100" lower="-1.5" upper="1.5" velocity="10"/>
    <joint_properties damping="1.0" friction="1.0"/>
  </joint>
  <!-- Kinect Sensor -->
  <link name="kinect">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.05 0.2 0.05"/>
      </geometry>
    </visual>
    <collision name="collision_kinect">
      <geometry>
        <box size="0.05 0.2 0.05"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.1"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="8.33333333333e-05" ixy="0" ixz="0" iyy="2.08333333333e-05" iyz="0" izz="8.33333333333e-05"/>
    </inertial>
  </link>
  <joint name="joint_kinect_chassis" type="fixed">
    <origin rpy="0 0 0" xyz="0.2 0 0.25"/>
    <child link="kinect"/>
    <parent link="chassis"/>
  </joint>
  <link name="kinect_link"/>
  <joint name="joint_kinect_link" type="fixed">
    <origin rpy="-1.5707 0 -1.5707" xyz="0.225 0 0.25"/>
    <child link="kinect_link"/>
    <parent link="chassis"/>
  </joint>
  <!-- Plugin for colors -->
  <gazebo reference="chassis">
    <material>Gazebo/Blue</material>
  </gazebo>
  <gazebo reference="laser">
    <material>Gazebo/Yellow</material>
  </gazebo>
  <gazebo reference="right_wheel">
    <material>Gazebo/Grey</material>
  </gazebo>
  <gazebo reference="left_wheel">
    <material>Gazebo/Grey</material>
  </gazebo>
  <gazebo reference="front_wheel">
    <material>Gazebo/Grey</material>
  </gazebo>
  <gazebo reference="kinect">
    <material>Gazebo/Black</material>
  </gazebo>
  <!-- Plugin for differentila drive -->
  <gazebo>
    <plugin filename="libgazebo_ros_diff_drive.so" name="differential_drive_controller">
      <legacyMode>false</legacyMode>
      <alwaysOn>true</alwaysOn>
      <updateRate>20</updateRate>
      <leftJoint>joint_left_wheel_chassis</leftJoint>
      <rightJoint>joint_right_wheel_chassis</rightJoint>
      <publishWheelTF>True</publishWheelTF>
      <wheelSeparation>0.2</wheelSeparation>
      <wheelDiameter>0.2</wheelDiameter>
      <torque>0.1</torque>
      <commandTopic>cmd_vel</commandTopic>
      <odometryTopic>odom</odometryTopic>
      <odometryFrame>odom</odometryFrame>
      <robotBaseFrame>chassis</robotBaseFrame>
    </plugin>
  </gazebo>
  <!-- Plugin for Kinect sensor -->
  <gazebo reference="kinect">
    <sensor name="camera1" type="depth">
      <always_on>1</always_on>
      <visualize>true</visualize>
      <camera>
        <horizontal_fov>1.047</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>R8G8B8</format>
        </image>
        <depth_camera>

		    </depth_camera>
        <clip>
          <near>0.1</near>
          <far>100</far>
        </clip>
      </camera>
      <plugin filename="libgazebo_ros_openni_kinect.so" name="camera_controller">
        <alwaysOn>true</alwaysOn>
        <updateRate>10.0</updateRate>
        <cameraName>kinect</cameraName>
        <frameName>kinect_link</frameName>
        <imageTopicName>rgb/image_raw</imageTopicName>
        <depthImageTopicName>depth/image_raw</depthImageTopicName>
        <pointCloudTopicName>depth/points</pointCloudTopicName>
        <cameraInfoTopicName>rgb/camera_info</cameraInfoTopicName>
        <depthImageCameraInfoTopicName>depth/camera_info</depthImageCameraInfoTopicName>
        <pointCloudCutoff>0.4</pointCloudCutoff>
        <hackBaseline>0.07</hackBaseline>
        <distortionK1>0.0</distortionK1>
        <distortionK2>0.0</distortionK2>
        <distortionK3>0.0</distortionK3>
        <distortionT1>0.0</distortionT1>
        <distortionT2>0.0</distortionT2>
        <CxPrime>0.0</CxPrime>
        <Cx>0.0</Cx>
        <Cy>0.0</Cy>
        <focalLength>0.0</focalLength>
      </plugin>
    </sensor>
  </gazebo>
</robot>

